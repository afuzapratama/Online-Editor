<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tes Konsol</title>
<script type="text/javascript" nonce="f1f28cb9564b4391915069327e0" src="//local.adguard.org?ts=1753551277976&amp;type=content-script&amp;dmn=localhost:5173&amp;url=http%3A%2F%2Flocalhost%3A5173%2Fapi%2Ffile-content%3Fpath%3Dindex.html&amp;app=chrome.exe&amp;css=2&amp;js=1&amp;rel=1&amp;rji=1&amp;sbe=1"></script>
<script type="text/javascript" nonce="f1f28cb9564b4391915069327e0" src="//local.adguard.org?ts=1753551277976&amp;name=AdGuard%20Extra&amp;name=AdGuard%20Popup%20Blocker&amp;type=user-script"></script>
<script>
    (function() {
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;

        // Fungsi ini lebih pintar dalam mengubah berbagai jenis data menjadi teks
        const formatArg = (arg) => {
            if (arg instanceof Error) {
                return arg.stack || arg.message;
            }
            if (typeof arg === 'object' && arg !== null) {
                try {
                    // Gunakan replacer untuk menangani objek yang berulang (circular)
                    const cache = new Set();
                    return JSON.stringify(arg, (key, value) => {
                        if (typeof value === 'object' && value !== null) {
                            if (cache.has(value)) {
                                return '[Circular Reference]';
                            }
                            cache.add(value);
                        }
                        return value;
                    }, 2);
                } catch (e) {
                    return 'Unserializable Object';
                }
            }
            return String(arg);
        };

        const sendMessage = (type, args) => {
            // Ubah semua argumen menjadi teks dan gabungkan
            const message = Array.from(args).map(formatArg).join(' ');
            window.parent.postMessage({
                source: 'preview-console',
                type: type,
                message: message
            }, '*');
        };

        console.log = function(...args) {
            originalLog.apply(console, args);
            sendMessage('log', args);
        };
        console.error = function(...args) {
            originalError.apply(console, args);
            sendMessage('error', args);
        };
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            sendMessage('warn', args);
        };
    })();
</script>
</head>
<body>
    <h1>Buka Konsol di Kambing ini</h1>
    <script src="script.js"></script>
</body>
</html>